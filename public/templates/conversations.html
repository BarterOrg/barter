<div class="box conversations" data-ng-init="renderMessages()">
  <h1><a href="#">Barter</a></h1>
  <div class="posts" ng-repeat="post in posts | orderBy:'createdAt':true">
    <button ng-click="deletePost(post)">Delete Post</button>
    <div class="conversation" ng-repeat="conversation in post.conversations | orderBy:'createdAt':true">
      <div>
        <h4 ng-click="expand(conversation)">Topic: {{post.itemName}}</h4>
        <button ng-show="conversation.expand" ng-click="deleteConversation(conversation, post)">Delete Conversation</button>
        <button ng-show="conversation.expand" ng-click="acceptBarter(conversation)">Accept Barter</button>
        <button ng-show="conversation.expand" ng-click="rejectBarter(conversation)">Reject Barter</button>
        <div class="messageContainer">
          <div class="messages" ng-repeat="message in conversation.messages | orderBy:'sentAt':false" ng-show="conversation.expand">
            <!-- <button ng-click="deleteMessage(message)">Delete Message</button> -->
            <p>{{message.from}}: {{message.message}}</p>
            <p>Sent: {{message.sentAt | date:'MM/dd/yyyy @ h:mma'}}</p>
          </div>
        </div>
      </div>
      <form ng-show="conversation.expand" ng-submit="sendMessage(conversation)">
        <input type="text" ng-model="conversation.reply" placeholder="Type a message!"></input>
        <button>Send</button>
        {{replyMessage}}
      </form>
    </div>
  </div>
<div>